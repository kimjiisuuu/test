<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/" lang="ko">
<head>
    <meta charset="UTF-8"/>
    <title>라이센스 회원목록창</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/list.css}"/>
</head>
<body>
<div th:replace="header.html :: head"></div>
<main>
    <h3>라이센스 회원 상세 정보</h3>
    <form action="" method="get">
        <div id="listDetail" >
            <table>
                <tr>
                    <th>학교명</th>
                    <th>학교이메일</th>
                    <th>담당선생님 이메일</th>
                    <th>학교행정실 번호</th>
                    <th>라이센스명</th>
                    <th>구독 시작날짜</th>
                    <th>구독 종료날짜</th>
                    <th>메일보내기</th>
                    <th>최근 메일발송 날짜</th>
                </tr>

                <tr th:each="dto : ${listDetail}">
                    <td th:text="${dto.schoolname}"></td>
                    <td th:text="${dto.schoolemail}"></td>
                    <td th:text="${dto.teacheremail}"></td>
                    <td th:text="${dto.schoolnumber}"></td>
                    <td th:text="${dto.licensename}"></td>
                    <td th:text="${dto.startdate}"></td>
                    <td th:text="${dto.enddate}"></td>
                    <td>
                        <button th:attr="data-idx=${dto.idx}, data-schoolname=${dto.schoolname}, data-schoolemail=${dto.schoolemail}, data-startdate=${dto.startdate}, data-enddate=${dto.enddate}, data-licensename=${dto.licensename}" onclick="sendEmail(this)">
                            메일보내기
                        </button>
                    </td>
                    <td th:text="${dto.senddate}"></td>
                    <td>
                        <a th:href="@{'/member/update?idx=' + ${dto.idx}}">수정하기</a>
                    </td>

                    <td>
                        <a th:href="@{/member/delete(idx=${dto.idx})}" onclick="return confirm('정말로 삭제하시겠습니까?')">삭제</a>
                    </td>

                </tr>
            </table>
        </div>
    </form>
</main>
</body>
<div th:replace="footer.html :: footer"></div>
</html>

